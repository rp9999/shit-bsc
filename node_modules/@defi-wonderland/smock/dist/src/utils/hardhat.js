"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fromFancyAddress = exports.toFancyAddress = exports.getHardhatBaseProvider = void 0;
const _1 = require(".");
const getHardhatBaseProvider = async (runtime) => {
    const maxLoopIterations = 1024;
    let currentLoopIterations = 0;
    let provider = runtime.network.provider;
    while (provider._wrapped !== undefined) {
        provider = provider._wrapped;
        currentLoopIterations += 1;
        if (currentLoopIterations > maxLoopIterations) {
            throw new Error(`[smock]: unable to find base hardhat provider. are you sure you're running locally?`);
        }
    }
    if (provider._node === undefined) {
        await provider._init();
    }
    return provider;
};
exports.getHardhatBaseProvider = getHardhatBaseProvider;
const toFancyAddress = (address) => {
    const fancyAddress = _1.fromHexString(address);
    fancyAddress.buf = _1.fromHexString(address);
    fancyAddress.toString = (encoding) => {
        if (encoding === undefined) {
            return address.toLowerCase();
        }
        else {
            return _1.fromHexString(address).toString(encoding);
        }
    };
    return fancyAddress;
};
exports.toFancyAddress = toFancyAddress;
const fromFancyAddress = (fancyAddress) => {
    if (fancyAddress.buf) {
        return _1.toHexString(fancyAddress.buf);
    }
    else {
        return _1.toHexString(fancyAddress);
    }
};
exports.fromFancyAddress = fromFancyAddress;
//# sourceMappingURL=hardhat.js.map